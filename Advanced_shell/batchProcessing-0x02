#!/usr/bin/env bash

POKEMON_LIST=("Bulbasaur" "Ivysaur" "Venusaur" "Charmander" "Charmeleon")

API_URL="https://pokeapi.co/api/v2/pokemon"

DELAY=2

for POKEMON in "${POKEMON_LIST[@]}"; do
    POKEMON_LOWER=$(echo "$POKEMON" | awk '{print tolower($0)}')
    
    OUTPUT_FILE="${POKEMON_LOWER}.json"

    echo "Fetching data for $POKEMON..."
    HTTP_STATUS=$(curl -s -o "$OUTPUT_FILE" -w "%{http_code}" "$API_URL/$POKEMON_LOWER")

    if [ "$HTTP_STATUS" -eq 200 ]; then
        echo "Data for $POKEMON saved to $OUTPUT_FILE"
    else
        echo "Error: Failed to fetch data for $POKEMON. HTTP Status: $HTTP_STATUS"
        rm -f "$OUTPUT_FILE"
    fi

    echo "Waiting for $DELAY seconds to avoid rate-limiting..."
    sleep "$DELAY"
done

echo "Data retrieval complete for all Pok√©mon."
